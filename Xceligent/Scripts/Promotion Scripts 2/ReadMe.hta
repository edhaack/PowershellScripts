<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Promotion Scripts - ReadMe</title>

</head><body>
<h2>WEB.CONFIG FILES<br>
</h2>
<br>
Directory: WebConfigFiles<br>
<br>
Each project solution has a Solution Folder pointed to the correct
location within WebConfigFiles. There, check-outs, check-ins and edits
can easily be made to each environment's specific web.config file. <br>
<br>
When <span style="font-weight: bold; font-style: italic; text-decoration: underline;">Test/QA
Deployments</span> are done, the application's "QA.Web.config"
file is copied along with the other application contents.<br>
<br>
When <span style="font-weight: bold; font-style: italic;">Demo/UAT
Deployments</span> are done, the application's "PROD.Web.config"
file is copied into the "The Build Config Files/Demo Build Config
Files/[Application]" directory (both Demo &amp; Prod directories),
and zipped up along with all of the other web application files that
are FTP'd to NetStandard. This<span style="font-weight: bold; font-style: italic;"> <span style="text-decoration: underline;">overwrites the file</span>
</span>contained within the local directory: "The Build Config
Files/Demo Build Config Files/[Application]" <br>
<br>
Ultimately, it's up to the Build Master to overwrite the configs. They
are changed so infrequently that it's rarely needed to update them.<br>
<br>
<span style="font-weight: bold; font-style: italic;">Root:
Global_config.asp</span> is a special case where connection
string and other app-level constants are kept for the classic asp
pages. This is stored in: <span style="font-style: italic;">C:\TFS\Common\Utility\Promotion
Scripts\TestToDemoRollout\The Build Config Files\Demo Build Config
Files </span>&nbsp;and is never overwritten before being
zipped up to be FTP'd.<br>
<br>
<br>
<h2>TEST/QA DEPLOYMENT</h2>
<p>
Directory: RolloutToTest<br>
Script: PromoteWebsite.ps1<br>
Purpose: Generic Website/application deployment script that removes any
source code and other files/directories to exclude not needed.<br>
</p>
<h3>DEPLOYMENT STEPS FOR&nbsp;TEST/QA</h3>
<ol>
<li>TeamCity (http://xdwebtest:8181/overview.html)</li>
<li>Find the project you need to deploy (e.g. CDX)</li>
<li>Find the build configuration named: "Promote to Test"</li>
<li>Click: RUN (Button)&nbsp;</li>
<li>Done.</li>
</ol>
<small><span style="font-style: italic;">For details
and the latest instructions, look thru the script that does this:
C:\TFS\Common\Utility\Promotion
Scripts\RolloutToTest\PromoteWebsite.ps1 .</span></small><br>
<h2>DEMO/UAT DEPLOYMENT</h2>
<h3>NUTSHELL OVERVIEW</h3>
<ul>
<li>TeamCity &gt; Build Configuration&nbsp;"<span style="font-weight: bold;">Promote to UAT</span>"
&gt; Run</li>
<li>RDP to DB3</li>
<li>Run PowerShell Script: D:\Deployment\DemoBuild-Rollout.ps1</li>
<li>Run MaxCopy for WebD</li>
<li>Done.</li>
</ul>
Directory: TestToDemoRollout<br>
Script: PromoteWebsite.ps1<br>
Purpose: Three part process:<br>
<ol>
<li>Copy Web Applications from XDWebTest to Zip File (Roll
Package) and FTP</li>
<li>Unzip from FTP to DB3</li>
<li>MaxCopy to UAT Environment (and prepares for PROD roll-out)</li>
</ol>
<h3>DETAILED STEPS</h3>
<ol>
<li> Get the latest version of the deployment scripts*
<ul>
<li> Open Visual Studio</li>
<li> View: Source Control Explorer</li>
<li> Drill down
to:&nbsp;$/Portfolio/Common/Utility/Promotion
Scripts/TestToDemoRollout</li>
<li> Get latest on:&nbsp;TestToDemoRollout</li>
</ul>
</li>
<li> Copy, Zip and Transfer to NetStandard (Hosting Company)*
<ul>
<li> Open "<strong>Powershell</strong>"&nbsp;</li>
<li> Before running this script for the first time, run "<span style="font-family: 'courier new',courier,monospace;">Set-ExecutionPolicy
Unrestricted</span>" within the PowerShell command line.
<ul>
<li> You will not need to ever enter this command again
on your machine.</li>
</ul>
</li>
<li> Execute the following
<ul>
<li> cd "C:\TFS\Common\Utility\Promotion
Scripts\TestToDemoRollout"</li>
<li> .\DemoBuild-Prepare.ps1</li>
</ul>
</li>
<li> Notes:
<ul>
<li> This script will
<ul>
<li> Copy Website files from Test/QA
<ul>
<li> CDX</li>
<li> ReportGenerationService</li>
<li> ReportPortalService</li>
<li> ServicePortalWeb&nbsp;</li>
</ul>
</li>
<li> Zip up all copied files, along with "The Build
Configuration Files"</li>
<li> FTP to server at NetStandard (where the
UAT/Demo and Production Servers reside).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li> Remote into Deployment Server (DB3)
<ul>
<li> Notes:
<ul>
<li> This script should&nbsp;already exist on the
deployment server. (e.g. on DB3 at D:\Deployments)
<ul>
<li> Location: TFS\Common\Utility\Promotion
Scripts\TestToDemoRollout-Part2\DemoBuild-Rollout.ps1&nbsp;</li>
<li> <strong>Only overwrite&nbsp;if
there are changes to the script.</strong></li>
</ul>
</li>
</ul>
</li>
<li> <strong>RemoteDesktop </strong>to the
deployment server (e.g. DB3)*
<ul>
<li> These servers are on the "<em>Xceligent.Local</em>"
domain. If an account is needed, contact your supervisor.</li>
</ul>
</li>
<li> Open <strong>PowerShell </strong>with&nbsp;"Run
as Administrator"</li>
<li> Execute the following
<ul>
<li> cd "D:\Deployment"</li>
<li> .\DemoBuild-Rollout.ps1
<ul>
<li> This script will:
<ul>
<li> copy the uploaded/ftp'd zip/roll package,</li>
<li> remove the "Deploy_Old" directory,</li>
<li> rename directory "Deploy" to "Deploy_Old"
and</li>
<li> extract the zip roll package to directory
"Deploy"</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li> Start <strong>MaxCopy</strong>
<ul>
<li> Notes
<ul>
<li> The Deployment zip file (package) contains a
copy of MaxCopy, a windows app that copies files from the unarchived
zip into the configured destination.</li>
<li> <em>MaxCopy&nbsp;</em>is
located:&nbsp;TFS\Common\Utility\Promotion
Scripts\testtodemorollout\the build config
files\maxcopyfiles\MaxCopy\MaxCopy.exe</li>
</ul>
</li>
<li> Open&nbsp;<em>MaxCopy</em></li>
<li> Open Template:&nbsp;Deploy_Demo_WebD.mcp</li>
<li> Uncheck:&nbsp;<em>Verify File Counts
When Finished</em></li>
<li> Click Run.
<ul>
<li> Starts&nbsp;the process of copying files
to the Demo Web Server (<strong>\\WebD</strong>) as well as
the Demo Report Server (<strong>\\report-demo</strong>)
<ul>
<li> Confirm what files are copied where by
opening up Deploy_Demo_WebD.mcp in a text editor; it's just an xml file.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p> Communicate that UAT/Demo web site files have been updated.</p>
<p> &nbsp;</p>
<p> *These steps can now be consolidated and executed via
TeamCity by <a href="http://ehaack:8181/project.html?projectId=PromoteToDemo&amp;tab=projectOverview" target="_blank">clicking here</a>&nbsp;and then
click "Run".</p>
<p> ----</p>
<p> &nbsp;</p>
<p> &nbsp;</p>
<p> &nbsp;</p>
<p> &nbsp;</p>
<p>
<table style="width: 768px; height: 134px;" border="1">
<tbody>
<tr>
<td colspan="3"><b>NOTES</b></td>
</tr>
<tr>
<td>Date</td>
<td>Author</td>
<td>Notes</td>
</tr>
<tr>
<td>2014.03.13</td>
<td>E. Haack</td>
<td>Created</td>
</tr>
<tr>
<td>2014.03.14</td>
<td>E. Haack</td>
<td>Updated to reflect new TeamCity ability for Steps 1
&amp; 2</td>
</tr>
<tr>
<td>2014.05.16</td>
<td>E. Haack</td>
<td>Added new content to explain web.config's and refine
the steps for deployments.</td>
</tr>
</tbody>
</table>
</p>
<p> &nbsp;</p>
<p> &nbsp;</p>
<p> &nbsp;</p>
</body></html>